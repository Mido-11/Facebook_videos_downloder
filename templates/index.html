<!DOCTYPE html>
<html lang="{{ language }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ get_translation(language, 'title') }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { font-family: Arial, sans-serif; }
        .container { max-width: 600px; margin-top: 50px; text-align: center; padding: 20px; border-radius: 8px; }
        .banner { font-size: 2em; font-weight: bold; color: #3b5998; margin-bottom: 20px; }
        .alert { margin-top: 20px; }
        .dark-mode { background-color: #333; color: white; }
        .light-mode { background-color: #fff; color: black; }
    </style>
</head>
<body class="light-mode">
    <div class="container">
        <!-- Banner -->
        <h1 class="banner">{{ get_translation(language, 'title') }}</h1>
        <p>{{ get_translation(language, 'description') }}</p>

        <!-- Language Toggle -->
        <div class="mb-3">
            <a href="?lang=en" class="btn btn-outline-primary btn-sm">{{ get_translation(language, 'view') }} English</a>
            <a href="?lang=ar" class="btn btn-outline-primary btn-sm">{{ get_translation(language, 'view') }} العربية</a>
        </div>

        <!-- Form to enter video URL -->
        <form method="POST">
            <div class="input-group mb-3">
                <input type="text" class="form-control" name="video_url" placeholder="{{ get_translation(language, 'enter_url') }}" required>
                <div class="input-group-append">
                    <button type="submit" class="btn btn-primary">{{ get_translation(language, 'verify_link') }}</button>
                </div>
            </div>
        </form>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="mt-4">
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <!-- Show video if fetched -->
        {% if ext %}
        <div class="mt-4">
            <video controls width="100%">
                <source src="{{ url_for('view_file', filename=filename) }}" type="video/{{ ext }}">
                Your browser does not support the video tag.
            </video>
            <a href="{{ url_for('download_file', filename=filename) }}" class="btn btn-success mt-3">{{ get_translation(language, 'download') }}</a>
        </div>
        {% endif %}

        <!-- Dark Mode Toggle -->
        <div class="form-check form-switch mt-4">
            <input class="form-check-input" type="checkbox" id="darkModeToggle">
            <label class="form-check-label" for="darkModeToggle">{{ get_translation(language, 'dark_mode') }}</label>
        </div>

        <footer class="mt-5">
            <p>&copy; 2024 @Powered by Mido</p>
        </footer>
    </div>

    <script>
        // Dark Mode Toggle Script
        document.getElementById('darkModeToggle').addEventListener('change', function() {
            document.body.classList.toggle('dark-mode', this.checked);
            document.body.classList.toggle('light-mode', !this.checked);
        });
    </script>
</body>
</html>
